define(["require","qpf","../module","text!./navigator.xml","./navlink","../common/list","./imageitem","../viewport/index","../router"],function(e){function c(){$(".image-list").show()}function h(){function r(){console.log(arguments)}$(".image-list").hide();var e=a.texture,t=document.createElement("video");e.minFilter=THREE.LinearFilter,e.magFilter=THREE.LinearFilter,e.image=t,e.generateMipmaps=!1,a.on("beforerender",function(){e.needsUpdate=!0});var n={video:!0};navigator.getUserMedia?navigator.getUserMedia(n,function(e){t.src=e,t.play()},r):navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia(n,function(e){t.src=window.webkitURL.createObjectURL(e),t.play()},r)}var t=e("qpf"),n=t.use("knockout"),r=e("../module"),i=e("text!./navigator.xml"),s=e("./navlink"),o=e("../common/list"),u=e("./imageitem"),a=e("../viewport/index"),f=e("../router"),l=new r({name:"navigator",xml:i,images:n.observableArray(),ImageItem:u});return $.get("../file_upload/list.json",function(e){_.each(e,function(e){e.image=e.url,e.title=e.name,delete e.url,delete e.name}),l.images(e)}),l.$el.delegate(".qpf-image img","click",function(){a.texture.generateMipmaps=!0,a.texture.image=this,a.texture.needsUpdate=!0}),l.$el.delegate(".qpf-ui-navlink","click",function(){var e=$(this),t=e.qpf("get");if(t)switch(t.icon()){case"camera":h();break;case"cloud":c()}l.$el.find(".qpf-ui-navlink").removeClass("active"),e.addClass("active")}),l});