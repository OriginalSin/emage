define(["require","../module","text!./viewport.xml","../layers/index","./viewport"],function(e){function f(){u=this.renderer,o&&clearInterval(o),setInterval(c,100)}function l(){u&&u.setSize(this.width(),this.height())}function c(){s.trigger("beforerender"),a.render(u)}var t=e("../module"),n=e("text!./viewport.xml"),r=e("../layers/index"),i=e("./viewport"),s=new t({name:"viewport",xml:n,onRender:f,onResize:l,texture:THREE.ImageUtils.loadTexture("../file_upload/4.jpg"),resize:function(){var e=s.texture.image,t=e.height/e.width;if(s.mainComponent.parent){var n=s.mainComponent.parent.width(),r=s.mainComponent.parent.height();t<1?(s.mainComponent.$el.css({"margin-top":(r-n*t)/2+"px","margin-left":"0px"}),s.mainComponent.height(n*t),s.mainComponent.width(n)):(s.mainComponent.$el.css({"margin-left":(n-r/t)/2,"margin-top":"0px"}),s.mainComponent.width(r/t),s.mainComponent.height(r))}}});s.texture.image.onload=function(){s.texture.needsUpdate=!0,s.resize()},s.on("start",function(){s.resize()});var o=0,u,a=r.manager;return a.texture=s.texture,s});