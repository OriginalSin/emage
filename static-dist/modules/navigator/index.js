define(["require","qpf","../module","text!./navigator.xml","./navlink","../common/list","./imageitem","../viewport/index","../router"],function(e){function h(){$(".image-list").show()}function p(){function n(){console.log(arguments)}$(".image-list").hide();var e=a.texture;c=document.createElement("video"),e.minFilter=THREE.LinearFilter,e.magFilter=THREE.LinearFilter,e.image=c,e.generateMipmaps=!1,a.on("beforerender",function(){e.needsUpdate=!0});var t={video:!0};navigator.getUserMedia?navigator.getUserMedia(t,function(e){c.src=e,c.play()},n):navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia(t,function(e){c.src=window.webkitURL.createObjectURL(e),c.play()},n)}var t=e("qpf"),n=t.use("knockout"),r=e("../module"),i=e("text!./navigator.xml"),s=e("./navlink"),o=e("../common/list"),u=e("./imageitem"),a=e("../viewport/index"),f=e("../router"),l=new r({name:"navigator",xml:i,images:n.observableArray(),ImageItem:u});$.get("../file_upload/list.json",function(e){_.each(e,function(e){e.image=e.url,e.title=e.name,delete e.url,delete e.name}),l.images(e)}),l.$el.delegate(".qpf-image img","click",function(){a.texture.generateMipmaps=!0,a.texture.image=this,a.texture.needsUpdate=!0}),l.$el.delegate(".qpf-ui-navlink","click",function(){var e=$(this),t=e.qpf("get");if(t)switch(t.icon()){case"camera":p();break;case"cloud":h()}l.$el.find(".qpf-ui-navlink").removeClass("active"),e.addClass("active")});var c;return l});